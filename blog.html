<article class="blog active" data-page="blog">
  <header>
    <h2 class="h2 article-title">Blog</h2>
  </header>

  <section class="blog-posts">
    <ul class="blog-posts-list" id="blog-list">
      <!-- JavaScript vult dit met Firebase-data -->
    </ul>
  </section>
</article>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyClKhiiSVZ3sj_6dqzxZAT9owaFHfJHrnk",
    authDomain: "portfolio-lucas-8461a.firebaseapp.com",
    projectId: "portfolio-lucas-8461a",
    storageBucket: "portfolio-lucas-8461a.appspot.com",
    messagingSenderId: "474096039312",
    appId: "1:474096039312:web:5cee76f8389f9c02e1af15"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadBlogs() {
    const blogList = document.getElementById("blog-list");
    const querySnapshot = await getDocs(collection(db, "blogs"));
    querySnapshot.forEach((doc) => {
      const blog = doc.data();
      const li = document.createElement("li");
      li.className = "blog-post-item";
      li.innerHTML = `
        <a href="blog-post.html?id=${doc.id}">
          <figure class="blog-banner-box">
            <img src="${blog.coverImage || 'https://via.placeholder.com/400x200'}" alt="${blog.title}" loading="lazy">
          </figure>
          <div class="blog-content">
            <div class="blog-meta">
              <p class="blog-category">Blog</p>
              <span class="dot"></span>
              <time datetime="${blog.createdAt}">${new Date(blog.createdAt).toLocaleDateString()}</time>
            </div>
            <h3 class="h3 blog-item-title">${blog.title}</h3>
            <p class="blog-text">${blog.content.substring(0, 100)}...</p>
          </div>
        </a>
      `;
      blogList.appendChild(li);
    });
  }

  loadBlogs();
</script>
